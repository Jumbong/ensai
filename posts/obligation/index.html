<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Junior Jumbong">
<meta name="keywords" content="Zero coupon, Obligations, Courbe spot">

<title>Menu - Courbe de taux et valorisation d’obligations</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../ensai.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Menu</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.linkedin.com/in/junior-jumbong-258330211/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text">LinkedIn</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/Jumbong"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text">Github</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../posts/ValueAtRisk/ValueAtRisk.html">Ensai 3A</a></li><li class="breadcrumb-item"><a href="../../posts/obligation/index.html">Modèles de Courbe de taux</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Ensai 3A</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/ValueAtRisk/ValueAtRisk.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistiques des risques extrêmes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/MasteringFinancialData/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mastering Financial Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/obligation/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Modèles de Courbe de taux</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/MarketFinance/schiller.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CAPE Ratio</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Machine learning 3A</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/machineLearning3A/TP1_solution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TP1: PCA-OLS, Ridge, Lasso</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/machineLearning3A/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TP: Examen</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/machineLearning3A/QCM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">QCM surprise</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">climat</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/ClimateScenario/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">simple tool in R to analyze data : Graph representationExecution</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/ClimatMeteo/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Différence entre climat et météo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/NotionCle/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Notions clés pour comprendre le changement climatique</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#préparation-des-données-et-calcul-de-la-courbe-des-taux-de-zéro-coupon." id="toc-préparation-des-données-et-calcul-de-la-courbe-des-taux-de-zéro-coupon." class="nav-link" data-scroll-target="#préparation-des-données-et-calcul-de-la-courbe-des-taux-de-zéro-coupon."><span class="header-section-number">1.1</span> Préparation des données et Calcul de la courbe des taux de zéro coupon.</a>
  <ul class="collapse">
  <li><a href="#calcul-du-mid-qui-sera-considéré-comme-les-taux-de-prêt-interbancaire." id="toc-calcul-du-mid-qui-sera-considéré-comme-les-taux-de-prêt-interbancaire." class="nav-link" data-scroll-target="#calcul-du-mid-qui-sera-considéré-comme-les-taux-de-prêt-interbancaire."><span class="header-section-number">1.1.1</span> Calcul du Mid qui sera considéré comme les taux de prêt interbancaire.</a></li>
  <li><a href="#la-courbe-spot-à-partir-des-cash-rates-cest-à-dire-à-court-terme." id="toc-la-courbe-spot-à-partir-des-cash-rates-cest-à-dire-à-court-terme." class="nav-link" data-scroll-target="#la-courbe-spot-à-partir-des-cash-rates-cest-à-dire-à-court-terme."><span class="header-section-number">1.1.2</span> La courbe spot à partir des cash rates c’est-à-dire à court terme.</a></li>
  <li><a href="#calcul-de-t1-afin-de-calculer-la-courbe-spot-à-partir-des-taux-forward." id="toc-calcul-de-t1-afin-de-calculer-la-courbe-spot-à-partir-des-taux-forward." class="nav-link" data-scroll-target="#calcul-de-t1-afin-de-calculer-la-courbe-spot-à-partir-des-taux-forward."><span class="header-section-number">1.1.3</span> Calcul de T1 afin de calculer la courbe spot à partir des taux forward.</a></li>
  <li><a href="#calcul-des-différentes-dates-de-maturité" id="toc-calcul-des-différentes-dates-de-maturité" class="nav-link" data-scroll-target="#calcul-des-différentes-dates-de-maturité"><span class="header-section-number">1.1.4</span> Calcul des différentes dates de maturité</a></li>
  <li><a href="#création-dun-dataframe-pour-le-prolongement-de-la-courbe-de-spot-sur-50-ans." id="toc-création-dun-dataframe-pour-le-prolongement-de-la-courbe-de-spot-sur-50-ans." class="nav-link" data-scroll-target="#création-dun-dataframe-pour-le-prolongement-de-la-courbe-de-spot-sur-50-ans."><span class="header-section-number">1.1.5</span> Création d’un dataframe pour le prolongement de la courbe de spot sur 50 ans.</a></li>
  <li><a href="#interpolation-des-valeurs-de-mid-qui-ont-des-valeurs-manquantes." id="toc-interpolation-des-valeurs-de-mid-qui-ont-des-valeurs-manquantes." class="nav-link" data-scroll-target="#interpolation-des-valeurs-de-mid-qui-ont-des-valeurs-manquantes."><span class="header-section-number">1.1.6</span> Interpolation des valeurs de Mid qui ont des valeurs manquantes.</a></li>
  <li><a href="#courbe-dobligation-spot-moyen-et-long-terme" id="toc-courbe-dobligation-spot-moyen-et-long-terme" class="nav-link" data-scroll-target="#courbe-dobligation-spot-moyen-et-long-terme"><span class="header-section-number">1.1.7</span> Courbe d’obligation spot moyen et long terme</a></li>
  <li><a href="#construction-de-la-courbe-de-taux-zéro-coupon-spot" id="toc-construction-de-la-courbe-de-taux-zéro-coupon-spot" class="nav-link" data-scroll-target="#construction-de-la-courbe-de-taux-zéro-coupon-spot"><span class="header-section-number">1.1.8</span> Construction de la courbe de taux zéro coupon spot</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#valorisation-dune-obligation" id="toc-valorisation-dune-obligation" class="nav-link" data-scroll-target="#valorisation-dune-obligation"><span class="header-section-number">2</span> Valorisation d’une obligation</a>
  <ul class="collapse">
  <li><a href="#sensibilité-du-prix-dune-obligation-en-fonction-du-taux-dintérêt-et-du-spread-de-crédit" id="toc-sensibilité-du-prix-dune-obligation-en-fonction-du-taux-dintérêt-et-du-spread-de-crédit" class="nav-link" data-scroll-target="#sensibilité-du-prix-dune-obligation-en-fonction-du-taux-dintérêt-et-du-spread-de-crédit"><span class="header-section-number">2.1</span> Sensibilité du prix d’une obligation en fonction du taux d’intérêt et du spread de crédit</a></li>
  </ul></li>
  <li><a href="#calcul-de-la-duration-à-t-0-avec-h-0.00001" id="toc-calcul-de-la-duration-à-t-0-avec-h-0.00001" class="nav-link" data-scroll-target="#calcul-de-la-duration-à-t-0-avec-h-0.00001"><span class="header-section-number">3</span> Calcul de la duration à t =0 avec h = 0.00001</a>
  <ul class="collapse">
  <li><a href="#valorisation-dun-produit-exotique-avec-hull-white" id="toc-valorisation-dun-produit-exotique-avec-hull-white" class="nav-link" data-scroll-target="#valorisation-dun-produit-exotique-avec-hull-white"><span class="header-section-number">3.1</span> Valorisation d’un produit Exotique avec Hull White</a>
  <ul class="collapse">
  <li><a href="#calcul-de-btt-avec-hull-white" id="toc-calcul-de-btt-avec-hull-white" class="nav-link" data-scroll-target="#calcul-de-btt-avec-hull-white"><span class="header-section-number">3.1.1</span> Calcul de B(t,T) avec Hull White</a></li>
  <li><a href="#calibration-de-la-volatilité-pour-un-strike-k4-une-maturité-t1-et-deltala-fraction-de-lannée-12" id="toc-calibration-de-la-volatilité-pour-un-strike-k4-une-maturité-t1-et-deltala-fraction-de-lannée-12" class="nav-link" data-scroll-target="#calibration-de-la-volatilité-pour-un-strike-k4-une-maturité-t1-et-deltala-fraction-de-lannée-12"><span class="header-section-number">3.1.2</span> Calibration de la volatilité pour un strike K=4%, une maturité T=1 et <span class="math inline">\(\delta\)</span>(la fraction de l’année) = 1/2</a></li>
  <li><a href="#simulation-de-monte-carlo-pour-calibrer-les-niveaux-de-seuil" id="toc-simulation-de-monte-carlo-pour-calibrer-les-niveaux-de-seuil" class="nav-link" data-scroll-target="#simulation-de-monte-carlo-pour-calibrer-les-niveaux-de-seuil"><span class="header-section-number">3.1.3</span> Simulation de Monte Carlo pour calibrer les niveaux de seuil</a></li>
  </ul></li>
  <li><a href="#valorisation-dune-obligation-avec-clause-de-rappel-avec-hull-white." id="toc-valorisation-dune-obligation-avec-clause-de-rappel-avec-hull-white." class="nav-link" data-scroll-target="#valorisation-dune-obligation-avec-clause-de-rappel-avec-hull-white."><span class="header-section-number">3.2</span> Valorisation d’une obligation avec clause de rappel avec Hull White.</a>
  <ul class="collapse">
  <li><a href="#modèle-de-hull-et-white" id="toc-modèle-de-hull-et-white" class="nav-link" data-scroll-target="#modèle-de-hull-et-white"><span class="header-section-number">3.2.1</span> Modèle de Hull et White</a></li>
  <li><a href="#calcul-du-prix-de-loption-de-rappel" id="toc-calcul-du-prix-de-loption-de-rappel" class="nav-link" data-scroll-target="#calcul-du-prix-de-loption-de-rappel"><span class="header-section-number">3.2.2</span> Calcul du prix de l’option de rappel</a></li>
  <li><a href="#sensibilité-du-prix-de-loption-de-rappel-en-fonction-de-la-date-dexercie-de-la-volatilité-et-du-taux-dintérêt." id="toc-sensibilité-du-prix-de-loption-de-rappel-en-fonction-de-la-date-dexercie-de-la-volatilité-et-du-taux-dintérêt." class="nav-link" data-scroll-target="#sensibilité-du-prix-de-loption-de-rappel-en-fonction-de-la-date-dexercie-de-la-volatilité-et-du-taux-dintérêt."><span class="header-section-number">3.2.3</span> Sensibilité du prix de l’option de rappel en fonction de la date d’exercie, de la volatilité et du taux d’intérêt.</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">4</span> Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../posts/ValueAtRisk/ValueAtRisk.html">Ensai 3A</a></li><li class="breadcrumb-item"><a href="../../posts/obligation/index.html">Modèles de Courbe de taux</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Courbe de taux et valorisation d’obligations</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Junior Jumbong <a href="mailto:junior.jumbong@eleve.ensai.fr" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/+33 7 53 86 56 98" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
          </div>
  </div>
    
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    <p>Lors de la valorisation d’une obligation, il est essentiel de considérer des éléments clés tels que le prix sale (dirty price) et le prix net (clean price), lesquels dépendent de facteurs variés incluant le taux d’intérêt, la maturité et le taux de coupon. Dans cette analyse, nous avons généré la courbe des taux spot en utilisant des obligations zéro coupon et évalué le prix d’une obligation sous l’hypothèse d’une courbe de taux déterministe. Par la suite, nous avons exploré un modèle simplifié de Hull et White, examiné les spécificités d’une obligation munie d’une clause de rappel et discuté des stratégies de couverture contre le risque de taux d’intérêt.</p>
  </div>
</div>

<div>
  <div class="keywords">
    <div class="block-title">Keywords</div>
    <p>Zero coupon, Obligations, Courbe spot</p>
  </div>
</div>

</header>


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>Une obligation zéro coupon est une obligation dont les intérêts sont versés en totalité à l’échéance de l’emprunt après avoir capitalisé sur toute la période.Elle est mise à un prix inférieur à sa valeur nominale et remboursée à sa valeur nominale complète à l’échéance.Par exemple, une obligation de valeur nominale 1000€ et de maturité pourrait être mise à 680 €. Ce prix inférieur reflète le fait que l’investisseur ne recevra pas d’intérêt annuel. À l’échéance, l’investisseur recevra 1000 €. Il est donc important de savoir calculer le prix d’une obligation zéro. Nous noterons B(t,T) le prix d’une obligation zéro coupon de maturité T à l’instant t. Il a plusieurs applications : - Il va permettre de construire la courbe de taux zéro coupon. - Il joue le rôle de facteur d’actualisation. - Il est aussi utilisé dans la modélisation du modèle de Hull et White.</p>
<p>La première section de ce document se focalisera sur l’élaboration de la courbe relative aux obligations zéro coupon, à partir de laquelle nous déduirons aisément la courbe des taux zéro coupon. Dans la 2nde partie, nous allons valoriser une obligation. Dans la seconde partie, nous procéderons à la valorisation d’une obligation, en mettant l’accent sur le concept de dirty price et de clean price. Ensuite nous étudier la sensibilité du prix d’une obligation en fonction du taux d’intérêt et du spread de crédit. Enfin, la troisième partie sera consacrée à l’étude d’un modèle simple de Hull et White.</p>
<section id="préparation-des-données-et-calcul-de-la-courbe-des-taux-de-zéro-coupon." class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="préparation-des-données-et-calcul-de-la-courbe-des-taux-de-zéro-coupon."><span class="header-section-number">1.1</span> Préparation des données et Calcul de la courbe des taux de zéro coupon.</h2>
<p>L’objectif de cette partie est de construire la courbe spot des taux zéro coupon <span class="math inline">\(r_T\)</span> à partir des données de marché. Il est donné par la formule suivante : <span class="math display">\[r_T = -\frac{1}{T} \ln B(0,T)\]</span></p>
<p>La calibration de la courbe de taux se fait par bootstrapping à partir des cotations du marché : - CT = cash rates (les cash flow) : Ici c’est la courbe de taux qui est constatée sur le marché interbancaire - FRA = Forward Rate Agreement (les taux forward) - SWAP = Interest Rate Swap (les taux swap)</p>
<div id="cell-3" class="cell" data-execution_count="232">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!pip install openpyxl</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">42</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy <span class="im">import</span> interpolate</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#importer un fichier xlsx : la première feuille</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#courses = pd.read_csv('courses.csv')</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>taux_BBG <span class="op">=</span> pd.read_excel(<span class="st">'Taux_BBG.xlsx'</span>, sheet_name<span class="op">=</span><span class="st">'Feuil1'</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="création-dune-ligne-qui-sera-la-première-ligne-de-notre-fichier" class="level4" data-number="1.1.0.1">
<h4 data-number="1.1.0.1" class="anchored" data-anchor-id="création-dune-ligne-qui-sera-la-première-ligne-de-notre-fichier"><span class="header-section-number">1.1.0.1</span> Création d’une ligne qui sera la première ligne de notre fichier</h4>
<div id="cell-5" class="cell" data-execution_count="233">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calcul du Mid qui est la moyenne entre le bid et l'ask</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>nouvelle_ligne <span class="op">=</span> pd.DataFrame({</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Term'</span>: [<span class="dv">5</span>],  <span class="co"># Supposons que vous voulez ajouter une période de 5 mois au début</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unit'</span>: [<span class="st">'MO'</span>],</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Ticker'</span>: [<span class="st">'EUR005M'</span>],  <span class="co"># Supposons un ticker pour la nouvelle ligne</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Bid'</span>: [<span class="fl">3.9</span>],  <span class="co"># Exemple de valeur Bid</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Ask'</span>: [<span class="fl">3.9</span>],  <span class="co"># Exemple de valeur Ask</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Spread'</span>: [<span class="va">None</span>],</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Bid Spr Val'</span>: [<span class="dv">0</span>],</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Ask Spr Val'</span>: [<span class="dv">0</span>],</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Final Bid Rate'</span>: [<span class="va">None</span>],</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Final Ask Rate'</span>: [<span class="va">None</span>],</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Rate Type'</span>: [<span class="va">None</span>],</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Daycount'</span>: [<span class="va">None</span>],</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Freq'</span>: [<span class="va">None</span>]</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>}, index<span class="op">=</span>[<span class="dv">0</span>])</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.concat([nouvelle_ligne, taux_BBG], ignore_index<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="calcul-du-mid-qui-sera-considéré-comme-les-taux-de-prêt-interbancaire." class="level3" data-number="1.1.1">
<h3 data-number="1.1.1" class="anchored" data-anchor-id="calcul-du-mid-qui-sera-considéré-comme-les-taux-de-prêt-interbancaire."><span class="header-section-number">1.1.1</span> Calcul du Mid qui sera considéré comme les taux de prêt interbancaire.</h3>
<p>Pour calculer la courbe de taux à court terme, nous avons besoin du Mid qui est la moyenne entre le bid et l’ask. Nous nous le considérons comme proxy des taux interbancaires par exemple le LIBOR. Il était important de considérer la liquidité de l’instrument. Les écarts plus larges entre le bid et l’ask indiquent une liquidité plus faible.Ce qui pourrait influencer l’approximation du Libor.Pour des raisons de simplicité, nous avons, nous n’avons pas pris en compte la liquidité des instruments.</p>
<div id="cell-7" class="cell" data-execution_count="234">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'Mid'</span>] <span class="op">=</span> (df[<span class="st">'Bid'</span>] <span class="op">+</span> df[<span class="st">'Ask'</span>]) <span class="op">/</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-8" class="cell" data-execution_count="235">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialisation des colonnes</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'T'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'T1'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'T2'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'B(0,T)'</span>] <span class="op">=</span> <span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="le-prix-dune-obligation-zéro-coupon-à-linstant-t0-qui-paie-1-unité-monétaire-à-linstant-0-est-de-1." class="level4" data-number="1.1.1.1">
<h4 data-number="1.1.1.1" class="anchored" data-anchor-id="le-prix-dune-obligation-zéro-coupon-à-linstant-t0-qui-paie-1-unité-monétaire-à-linstant-0-est-de-1."><span class="header-section-number">1.1.1.1</span> Le prix d’une obligation zéro coupon à l’instant <span class="math inline">\(t=0\)</span> qui paie 1 unité monétaire à l’instant 0 est de 1.</h4>
<div id="cell-10" class="cell" data-execution_count="236">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># calcule du premier élement de B(0,T)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'B(0,T)'</span>].astype(<span class="bu">int</span>)[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="la-courbe-spot-à-partir-des-cash-rates-cest-à-dire-à-court-terme." class="level3" data-number="1.1.2">
<h3 data-number="1.1.2" class="anchored" data-anchor-id="la-courbe-spot-à-partir-des-cash-rates-cest-à-dire-à-court-terme."><span class="header-section-number">1.1.2</span> La courbe spot à partir des cash rates c’est-à-dire à court terme.</h3>
<p>Sa formule est donnée par :</p>
<p><span class="math display">\[B(0,T) = \frac{1}{(1+\delta*L )}\]</span></p>
<p>Où <span class="math inline">\(L\)</span> est le taux de prêt interbancaire(Libor par exemple) et <span class="math inline">\(\delta\)</span> est la fraction de l’année.</p>
<div id="cell-12" class="cell" data-execution_count="237">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Conversion des termes en années</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'T2'</span>] <span class="op">=</span> df[<span class="st">'Term'</span>].astype(<span class="bu">int</span>)<span class="op">/</span><span class="dv">12</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="calcul-de-t1-afin-de-calculer-la-courbe-spot-à-partir-des-taux-forward." class="level3" data-number="1.1.3">
<h3 data-number="1.1.3" class="anchored" data-anchor-id="calcul-de-t1-afin-de-calculer-la-courbe-spot-à-partir-des-taux-forward."><span class="header-section-number">1.1.3</span> Calcul de T1 afin de calculer la courbe spot à partir des taux forward.</h3>
<div id="cell-14" class="cell" data-execution_count="238">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'T1'</span>] <span class="op">=</span> df[<span class="st">'T2'</span>] <span class="op">-</span> <span class="fl">0.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="calcul-des-différentes-dates-de-maturité" class="level3" data-number="1.1.4">
<h3 data-number="1.1.4" class="anchored" data-anchor-id="calcul-des-différentes-dates-de-maturité"><span class="header-section-number">1.1.4</span> Calcul des différentes dates de maturité</h3>
<div id="cell-16" class="cell" data-execution_count="239">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># df['T'] = df['Term'].astype(int)/12 if df['Unit'] == 'MO' else df['Term'].astype(int)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># With apply function</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'T'</span>] <span class="op">=</span> df.<span class="bu">apply</span>(<span class="kw">lambda</span> x: x[<span class="st">'Term'</span>]<span class="op">/</span><span class="dv">12</span> <span class="cf">if</span> x[<span class="st">'Unit'</span>] <span class="op">==</span> <span class="st">'MO'</span> <span class="cf">else</span> x[<span class="st">'Term'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"Term"</span>,<span class="st">"Unit"</span>,<span class="st">"Mid"</span>,<span class="st">"T"</span>,<span class="st">"T1"</span>,<span class="st">"T2"</span>,<span class="st">"B(0,T)"</span>]].head(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="239">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Term</th>
<th data-quarto-table-cell-role="th">Unit</th>
<th data-quarto-table-cell-role="th">Mid</th>
<th data-quarto-table-cell-role="th">T</th>
<th data-quarto-table-cell-role="th">T1</th>
<th data-quarto-table-cell-role="th">T2</th>
<th data-quarto-table-cell-role="th">B(0,T)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>5</td>
<td>MO</td>
<td>3.900</td>
<td>0.416667</td>
<td>-0.083333</td>
<td>0.416667</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>6</td>
<td>MO</td>
<td>3.832</td>
<td>0.500000</td>
<td>0.000000</td>
<td>0.500000</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-17" class="cell" data-execution_count="240">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'B(0,T1)'</span>] <span class="op">=</span><span class="dv">0</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'T'</span>].astype(<span class="bu">int</span>)[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>df.loc[<span class="dv">0</span>, <span class="st">'B(0,T)'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>df.loc[<span class="dv">1</span>,<span class="st">'B(0,T)'</span>] <span class="op">=</span> <span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span><span class="op">+</span> df.loc[<span class="dv">1</span>,<span class="st">'Mid'</span>]<span class="op">/</span><span class="dv">100</span><span class="op">*</span><span class="fl">0.5</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">"Term"</span>,<span class="st">"Mid"</span>,<span class="st">"T"</span>,<span class="st">"T1"</span>,<span class="st">"T2"</span>,<span class="st">"B(0,T)"</span>,<span class="st">"B(0,T1)"</span>]].head(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="240">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Term</th>
<th data-quarto-table-cell-role="th">Mid</th>
<th data-quarto-table-cell-role="th">T</th>
<th data-quarto-table-cell-role="th">T1</th>
<th data-quarto-table-cell-role="th">T2</th>
<th data-quarto-table-cell-role="th">B(0,T)</th>
<th data-quarto-table-cell-role="th">B(0,T1)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>5</td>
<td>3.900</td>
<td>0.416667</td>
<td>-0.083333</td>
<td>0.416667</td>
<td>1.0000</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>6</td>
<td>3.832</td>
<td>0.500000</td>
<td>0.000000</td>
<td>0.500000</td>
<td>0.9812</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Dans la partie ci-dessus, nous avons calculé la courbe spot à partir des cash rates. Nous allons maintenant calculer la courbe spot à partir des taux forward et les taux swap. Nous pourrons ainsi prolonger la courbe spot jusqu’à 50 ans par des interpolations linéaires.</p>
</section>
<section id="création-dun-dataframe-pour-le-prolongement-de-la-courbe-de-spot-sur-50-ans." class="level3" data-number="1.1.5">
<h3 data-number="1.1.5" class="anchored" data-anchor-id="création-dun-dataframe-pour-le-prolongement-de-la-courbe-de-spot-sur-50-ans."><span class="header-section-number">1.1.5</span> Création d’un dataframe pour le prolongement de la courbe de spot sur 50 ans.</h3>
<div id="cell-20" class="cell" data-execution_count="241">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># creation d'un dataframe qui va  prolonger le dataframe data_month jusqu'à 50 ans</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>Nombre_year <span class="op">=</span> <span class="dv">51</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>terms <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">15</span>, <span class="dv">18</span>] <span class="op">+</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">2</span>,Nombre_year))</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>units <span class="op">=</span> [<span class="st">'MO'</span> <span class="cf">if</span> i <span class="op">&lt;</span> <span class="dv">10</span> <span class="cf">else</span> <span class="st">'YR'</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(terms))]</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>data_50 <span class="op">=</span> pd.DataFrame({</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Term'</span>: terms,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Unit'</span>: units</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>data_final <span class="op">=</span> pd.merge(data_50, df, how<span class="op">=</span><span class="st">'left'</span>, on<span class="op">=</span>[<span class="st">'Term'</span>, <span class="st">'Unit'</span>])</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>data_final </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">#data_final['B(0,T)'][0] =1</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>data_final.loc[<span class="dv">0</span>, <span class="st">'B(0,T)'</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="co">#data_final['T'][0] = 0</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>data_final.loc[<span class="dv">0</span>, <span class="st">'T'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>data_final[[<span class="st">"Term"</span>,<span class="st">"Unit"</span>,<span class="st">"Mid"</span>,<span class="st">"T"</span>,<span class="st">"T1"</span>,<span class="st">"T2"</span>,<span class="st">"B(0,T)"</span>]].head(<span class="dv">2</span>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="241">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Term</th>
<th data-quarto-table-cell-role="th">Unit</th>
<th data-quarto-table-cell-role="th">Mid</th>
<th data-quarto-table-cell-role="th">T</th>
<th data-quarto-table-cell-role="th">T1</th>
<th data-quarto-table-cell-role="th">T2</th>
<th data-quarto-table-cell-role="th">B(0,T)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>0</td>
<td>MO</td>
<td>NaN</td>
<td>0.0</td>
<td>NaN</td>
<td>NaN</td>
<td>1.0000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>6</td>
<td>MO</td>
<td>3.832</td>
<td>0.5</td>
<td>0.0</td>
<td>0.5</td>
<td>0.9812</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="interpolation-des-valeurs-de-mid-qui-ont-des-valeurs-manquantes." class="level3" data-number="1.1.6">
<h3 data-number="1.1.6" class="anchored" data-anchor-id="interpolation-des-valeurs-de-mid-qui-ont-des-valeurs-manquantes."><span class="header-section-number">1.1.6</span> Interpolation des valeurs de Mid qui ont des valeurs manquantes.</h3>
<p>Nous avons utilisé le Mid comme proxy des taux interbancaires. Il représente la moyenne arithmétique entre le “ask” et le “bid”.Nous avons utilisé la méthode de l’interpolation linéaire pour remplir les valeurs manquantes.</p>
<div id="cell-22" class="cell" data-execution_count="242">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.interpolate <span class="im">import</span> interp1d</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>nan_indices <span class="op">=</span> data_final[<span class="st">'Mid'</span>][data_final[<span class="st">'Mid'</span>].isna()].index</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>valid_data <span class="op">=</span> data_final.dropna(subset<span class="op">=</span>[<span class="st">'Mid'</span>])</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>function <span class="op">=</span> interp1d(valid_data.index, valid_data[<span class="st">'Mid'</span>], fill_value<span class="op">=</span><span class="st">'extrapolate'</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> nan_index <span class="kw">in</span> nan_indices:</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    data_final.at[nan_index, <span class="st">'Mid'</span>] <span class="op">=</span> function(nan_index)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Le code ci-dessous va permettre de prolonger la courbe des obligations spot jusqu’à 50 ans. Nous avons ainsi propagé des valeurs de la colonne T jusqu’à 50 ans.</p>
<div id="cell-24" class="cell" data-execution_count="243">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>last_t <span class="op">=</span> data_final[<span class="st">'T'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(data_final)):</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> pd.isna(data_final.loc[i, <span class="st">'T'</span>]):</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        last_t <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        data_final.loc[i, <span class="st">'T'</span>] <span class="op">=</span> last_t</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        last_t <span class="op">=</span> data_final.loc[i, <span class="st">'T'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="courbe-dobligation-spot-moyen-et-long-terme" class="level3" data-number="1.1.7">
<h3 data-number="1.1.7" class="anchored" data-anchor-id="courbe-dobligation-spot-moyen-et-long-terme"><span class="header-section-number">1.1.7</span> Courbe d’obligation spot moyen et long terme</h3>
<p>En moyen terme, la courbe spot est donnée à partir des taux forward par la formule suivante:</p>
<p><span class="math display">\[B(0,T+\delta) = \frac{B(0,T)}{(1+\delta*f )}\]</span></p>
<p>où <span class="math inline">\(f\)</span> est le taux forward et <span class="math inline">\(\delta\)</span> est la fraction de l’année. Un prêt forward est un engagement entre 2 parties de vendre ou d’acheter un instrument financier à une date ultérieure et à un prix déterminé à l’avance.</p>
<p>En long terme, la courbe spot est donnée à partir des taux swap.Un contrat swap est un contrat d’échange de flux financiers entre deux parties. Un swap de taux est utilisé pour échanger des taux d’intérêt entre deux parties. La courbe spot est donnée par la formule suivante:</p>
<p><span class="math display">\[B(0,T_n) = \frac{1 -S_{T_n} \sum_{i=1}^{n-1} \delta_i B(0,T_i)}{1+\delta S_{T_n}}\]</span></p>
<div id="cell-26" class="cell" data-execution_count="244">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_B0T(df):</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co">    Calculate B(0,T) by interpolating B(0,T1) </span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">    based on given B(0,T) values in a DataFrame.</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="co">    - df: DataFrame containing columns 'T', 'B(0,T)',</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co">    'T1', and 'Mid'.</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="co">    - Updated DataFrame with interpolated 'B(0,T1)' </span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="co">    and recalculated 'B(0,T)'.</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    df[<span class="st">'PVBP'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, row <span class="kw">in</span> df.iterrows():</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> i <span class="kw">in</span> [<span class="dv">0</span>,<span class="dv">1</span>]:</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>        t1 <span class="op">=</span> row[<span class="st">'T1'</span>]</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> row[<span class="st">'Unit'</span>]<span class="op">==</span><span class="st">"MO"</span>:</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>            <span class="co">## On vérifie que l'interpolation est possible</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>            <span class="cf">try</span>:</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>                <span class="co"># On cherche les valeurs les plus proches de t1 dans la colonne T</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>                valid_points <span class="op">=</span> df.sort_values(<span class="st">'T'</span>)</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>                interp <span class="op">=</span> interpolate.interp1d(valid_points[<span class="st">'T'</span>], </span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>                                              valid_points[<span class="st">'B(0,T)'</span>],</span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>                                              kind<span class="op">=</span><span class="st">'linear'</span>, fill_value<span class="op">=</span><span class="st">'extrapolate'</span>)</span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>                b1 <span class="op">=</span> interp(t1)</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Update the DataFrame with the interpolated value</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a>                df.at[i, <span class="st">'B(0,T1)'</span>] <span class="op">=</span> b1  <span class="co"># Use 'at' for scalar value updates</span></span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Calcule du forward rate</span></span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>                df.at[i, <span class="st">'B(0,T)'</span>] <span class="op">=</span> b1 <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> <span class="fl">0.5</span> <span class="op">*</span> row[<span class="st">'Mid'</span>] <span class="op">/</span> <span class="dv">100</span>)</span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>                <span class="co"># Initialisation de la PVBP</span></span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>                df.at[i, <span class="st">'PVBP'</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>                            </span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a>            <span class="cf">except</span> <span class="pp">ValueError</span>:</span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>                <span class="bu">print</span>(<span class="ss">f"Impossible d'interpoler la valeur à l'index </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> avec t1 = </span><span class="sc">{</span>t1<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb13-54"><a href="#cb13-54" aria-hidden="true" tabindex="-1"></a>                <span class="cf">continue</span></span>
<span id="cb13-55"><a href="#cb13-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-56"><a href="#cb13-56" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb13-57"><a href="#cb13-57" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Calcul de PVBP et calcul des swaps</span></span>
<span id="cb13-58"><a href="#cb13-58" aria-hidden="true" tabindex="-1"></a>            df.at[i, <span class="st">'PVBP'</span>] <span class="op">=</span> df.at[i<span class="op">-</span><span class="dv">1</span>, <span class="st">'B(0,T1)'</span>] <span class="op">+</span> df.at[i<span class="op">-</span><span class="dv">1</span>, <span class="st">'PVBP'</span>]</span>
<span id="cb13-59"><a href="#cb13-59" aria-hidden="true" tabindex="-1"></a>            df.at[i, <span class="st">'B(0,T)'</span>] <span class="op">=</span> (<span class="dv">1</span><span class="op">-</span> row[<span class="st">'Mid'</span>]<span class="op">/</span><span class="dv">100</span><span class="op">*</span> df.at[i, <span class="st">'PVBP'</span>] )<span class="op">/</span>(<span class="dv">1</span><span class="op">+</span>row[<span class="st">'Mid'</span>]<span class="op">/</span><span class="dv">100</span>)</span>
<span id="cb13-60"><a href="#cb13-60" aria-hidden="true" tabindex="-1"></a>            df.at[i, <span class="st">'B(0,T1)'</span>] <span class="op">=</span> df.at[i, <span class="st">'B(0,T)'</span>]</span>
<span id="cb13-61"><a href="#cb13-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb13-62"><a href="#cb13-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-63"><a href="#cb13-63" aria-hidden="true" tabindex="-1"></a>essai <span class="op">=</span> calculate_B0T(data_final)</span>
<span id="cb13-64"><a href="#cb13-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-65"><a href="#cb13-65" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>La fonction ci-dessus nous a permis de terminer la construction de notre couple. Maintenant, nous pouvons passer à une représentation graphique de la courbe spot.</p>
<div id="cell-28" class="cell" data-execution_count="245">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#pip install matplotlib</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>plt.plot(essai[<span class="st">'T'</span>], essai[<span class="st">'B(0,T)'</span>])</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'T'</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'B(0,T)'</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Courbe d'obligation zéro coupon spot"</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-15-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="construction-de-la-courbe-de-taux-zéro-coupon-spot" class="level3" data-number="1.1.8">
<h3 data-number="1.1.8" class="anchored" data-anchor-id="construction-de-la-courbe-de-taux-zéro-coupon-spot"><span class="header-section-number">1.1.8</span> Construction de la courbe de taux zéro coupon spot</h3>
<p>La courbe de taux zéro coupon spot est donnée par la formule suivante:</p>
<p><span class="math display">\[r_T = -\frac{1}{T} \ln B(0,T)\]</span></p>
<div id="cell-30" class="cell" data-execution_count="246">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>essai[<span class="st">'RT'</span>] <span class="op">=</span> <span class="op">-</span>np.log(essai[<span class="st">'B(0,T)'</span>])<span class="op">/</span>essai[<span class="st">'T'</span>]</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#plot the cure</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>plt.plot(essai[<span class="st">'T'</span>], essai[<span class="st">'RT'</span>])</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Maturité en années'</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'RT'</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Courbe de taux spot sur 50 ans'</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="valorisation-dune-obligation" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Valorisation d’une obligation</h1>
<p>Dans cette partie, nous allons valoriser une obligation et nous allons mettre en exergue les notions de Dirty price et de Clean Price. Le Dirty price d’une obligation, comprend les intérêts courus sur l’obligation entre le dernier paiement du coupon et la date de règlement. Autrement dit, si un investisseur souhaite acheter une obligation, au prix sale, il devra payer le prix propre, plus les intérêts courus. Le Clean price, quant à lui est la valeur marchande riait de l’obligation, sans aucun intérêt couru. La continuité de cette coupe montre qu’elle a un intérêt économique et permet de se couvrir des risques.</p>
<p>Le prix d’une obligation zéro-coupon(dirty price) est donné par la formule suivante:</p>
<p><span class="math display">\[P(t,T) = \sum_{i=1}^{T} \left[ c \cdot B(t,i) \cdot PS(i) \cdot \mathbf{1}_{(t &lt; i)} \right] + B(t,T) \cdot PS(T) \cdot \mathbf{1}_{(t &lt; T)}\]</span></p>
<p>Où <span class="math inline">\(c\)</span> est le coupon, <span class="math inline">\(B(t,i)\)</span> est le prix d’une obligation zéro-coupon à l’instant t et de maturité i, <span class="math inline">\(PS(i)\)</span> est le principal de l’obligation et <span class="math inline">\(\mathbf{1}_{(t &lt; i)}\)</span> est la fonction indicatrice qui vaut 1 si t &lt; i et 0 sinon. <span class="math inline">\(PS(i)=\exp(-s \cdot (i-t))\)</span> où <span class="math inline">\(s\)</span> est le spread de crédit, représente la fonction de survie de l’obligation.</p>
<p>On supposera que la courbe de taux est déterministe: Dans ce B(t,T) est donné par la formule suivante: <span class="math display">\[B(t,T) =\frac{B(0,T)}{B(0,t)}\]</span></p>
<p>Le prix du clean price est obtenu en soustrayant les intérêts courus à chaque date de paiement du coupon au dirty price. Il est donné par la formule suivante:</p>
<p><span class="math display">\[\text{Clean Price} = \text{Dirty Price} - c \cdot \left(t - \lfloor t \rfloor\right)\]</span> Où <span class="math inline">\(\lfloor t \rfloor\)</span> est la partie entière de t.</p>
<div id="cell-32" class="cell" data-execution_count="247">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prix_obligation(t, c, s,T, data<span class="op">=</span>essai):</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Calcule le prix d'une obligation.</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">    - t: Taux d'intérêt sans risque</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">    - c: Coupon de l'obligation</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">    - s:spread</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">    - T: Maturité de l'obligation</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co">    - Prix de l'obligation</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    f_inte <span class="op">=</span> interpolate.interp1d(essai[<span class="st">'T'</span>], essai[<span class="st">'B(0,T)'</span>])</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>    pt <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,T<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> t <span class="op">&lt;</span> i:</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>            B_t_i <span class="op">=</span> f_inte(i)<span class="op">/</span>f_inte(t)   </span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>            ps_i <span class="op">=</span> np.exp(<span class="op">-</span>s<span class="op">*</span>(i<span class="op">-</span>t))</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>           </span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>            pt <span class="op">+=</span> c <span class="op">*</span>B_t_i <span class="op">*</span> ps_i</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> t<span class="op">&lt;</span>T:</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>        B_t_T <span class="op">=</span> f_inte(T)<span class="op">/</span>f_inte(t)</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>        ps_T  <span class="op">=</span> np.exp(<span class="op">-</span>s<span class="op">*</span>(T<span class="op">-</span>t))</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>        pt   <span class="op">+=</span> B_t_T <span class="op">*</span> ps_T   </span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pt</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean_price(t, c, s,T, data<span class="op">=</span>essai):</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a><span class="co">    Calcule le prix d'une obligation.</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a><span class="co">    - t: Taux d'intérêt sans risque</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a><span class="co">    - c: Coupon de l'obligation</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a><span class="co">    - s:spread</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a><span class="co">    - T: Maturité de l'obligation</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="co">    - Prix de l'obligation</span></span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>    f_inte <span class="op">=</span> interpolate.interp1d(essai[<span class="st">'T'</span>], essai[<span class="st">'B(0,T)'</span>])</span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>    pt <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,T<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> t <span class="op">&lt;</span> i:</span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a>            B_t_i <span class="op">=</span> f_inte(i)<span class="op">/</span>f_inte(t)   </span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a>            ps_i <span class="op">=</span> np.exp(<span class="op">-</span>s<span class="op">*</span>(i<span class="op">-</span>t))</span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a>           </span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a>            pt <span class="op">+=</span> c <span class="op">*</span>B_t_i <span class="op">*</span> ps_i </span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> t<span class="op">&lt;</span>T:</span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a>        B_t_T <span class="op">=</span> f_inte(T)<span class="op">/</span>f_inte(t)</span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a>        ps_T  <span class="op">=</span> np.exp(<span class="op">-</span>s<span class="op">*</span>(T<span class="op">-</span>t))</span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a>        pt   <span class="op">+=</span> B_t_T <span class="op">*</span> ps_T   </span>
<span id="cb16-58"><a href="#cb16-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pt <span class="op">-</span> c<span class="op">*</span>(t<span class="op">-</span>np.floor(t))</span>
<span id="cb16-59"><a href="#cb16-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-60"><a href="#cb16-60" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prix_obligation_shift(t, c, s,T, h,essai):</span>
<span id="cb16-61"><a href="#cb16-61" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb16-62"><a href="#cb16-62" aria-hidden="true" tabindex="-1"></a><span class="co">    Calcule le prix d'une obligation.</span></span>
<span id="cb16-63"><a href="#cb16-63" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb16-64"><a href="#cb16-64" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb16-65"><a href="#cb16-65" aria-hidden="true" tabindex="-1"></a><span class="co">    - t: Taux d'intérêt sans risque</span></span>
<span id="cb16-66"><a href="#cb16-66" aria-hidden="true" tabindex="-1"></a><span class="co">    - c: Coupon de l'obligation</span></span>
<span id="cb16-67"><a href="#cb16-67" aria-hidden="true" tabindex="-1"></a><span class="co">    - s:spread</span></span>
<span id="cb16-68"><a href="#cb16-68" aria-hidden="true" tabindex="-1"></a><span class="co">    - T: Maturité de l'obligation</span></span>
<span id="cb16-69"><a href="#cb16-69" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb16-70"><a href="#cb16-70" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb16-71"><a href="#cb16-71" aria-hidden="true" tabindex="-1"></a><span class="co">    - Prix de l'obligation</span></span>
<span id="cb16-72"><a href="#cb16-72" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb16-73"><a href="#cb16-73" aria-hidden="true" tabindex="-1"></a>    f_inte <span class="op">=</span> interpolate.interp1d(essai[<span class="st">'T'</span>], essai[<span class="st">'B(0,T)'</span>])</span>
<span id="cb16-74"><a href="#cb16-74" aria-hidden="true" tabindex="-1"></a>    pt <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb16-75"><a href="#cb16-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,T<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb16-76"><a href="#cb16-76" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> t <span class="op">&lt;</span> i:</span>
<span id="cb16-77"><a href="#cb16-77" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb16-78"><a href="#cb16-78" aria-hidden="true" tabindex="-1"></a>            B_t_i <span class="op">=</span> (f_inte(i)<span class="op">/</span>f_inte(t))<span class="op">*</span>(np.exp(<span class="op">-</span>h<span class="op">*</span>(i<span class="op">-</span>t)))   </span>
<span id="cb16-79"><a href="#cb16-79" aria-hidden="true" tabindex="-1"></a>            ps_i <span class="op">=</span> np.exp(<span class="op">-</span>s<span class="op">*</span>(i<span class="op">-</span>t))</span>
<span id="cb16-80"><a href="#cb16-80" aria-hidden="true" tabindex="-1"></a>           </span>
<span id="cb16-81"><a href="#cb16-81" aria-hidden="true" tabindex="-1"></a>            pt <span class="op">+=</span> c <span class="op">*</span>B_t_i <span class="op">*</span> ps_i</span>
<span id="cb16-82"><a href="#cb16-82" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> t<span class="op">&lt;</span>T:</span>
<span id="cb16-83"><a href="#cb16-83" aria-hidden="true" tabindex="-1"></a>        B_t_T <span class="op">=</span> (f_inte(T)<span class="op">/</span>f_inte(t))<span class="op">*</span>(np.exp(<span class="op">-</span>h<span class="op">*</span>(T<span class="op">-</span>t)))</span>
<span id="cb16-84"><a href="#cb16-84" aria-hidden="true" tabindex="-1"></a>        ps_T  <span class="op">=</span> np.exp(<span class="op">-</span>s<span class="op">*</span>(T<span class="op">-</span>t))</span>
<span id="cb16-85"><a href="#cb16-85" aria-hidden="true" tabindex="-1"></a>        pt   <span class="op">+=</span> B_t_T <span class="op">*</span> ps_T    </span>
<span id="cb16-86"><a href="#cb16-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pt</span>
<span id="cb16-87"><a href="#cb16-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-88"><a href="#cb16-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-89"><a href="#cb16-89" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prix_obligation_spread(t, c, s,T, h,essai):</span>
<span id="cb16-90"><a href="#cb16-90" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb16-91"><a href="#cb16-91" aria-hidden="true" tabindex="-1"></a><span class="co">    Calcule le prix d'une obligation.</span></span>
<span id="cb16-92"><a href="#cb16-92" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb16-93"><a href="#cb16-93" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb16-94"><a href="#cb16-94" aria-hidden="true" tabindex="-1"></a><span class="co">    - t: Taux d'intérêt sans risque</span></span>
<span id="cb16-95"><a href="#cb16-95" aria-hidden="true" tabindex="-1"></a><span class="co">    - c: Coupon de l'obligation</span></span>
<span id="cb16-96"><a href="#cb16-96" aria-hidden="true" tabindex="-1"></a><span class="co">    - s:spread</span></span>
<span id="cb16-97"><a href="#cb16-97" aria-hidden="true" tabindex="-1"></a><span class="co">    - T: Maturité de l'obligation</span></span>
<span id="cb16-98"><a href="#cb16-98" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb16-99"><a href="#cb16-99" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb16-100"><a href="#cb16-100" aria-hidden="true" tabindex="-1"></a><span class="co">    - Prix de l'obligation</span></span>
<span id="cb16-101"><a href="#cb16-101" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb16-102"><a href="#cb16-102" aria-hidden="true" tabindex="-1"></a>    f_inte <span class="op">=</span> interpolate.interp1d(essai[<span class="st">'T'</span>], essai[<span class="st">'B(0,T)'</span>])</span>
<span id="cb16-103"><a href="#cb16-103" aria-hidden="true" tabindex="-1"></a>    pt <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb16-104"><a href="#cb16-104" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,T<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb16-105"><a href="#cb16-105" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> t <span class="op">&lt;</span> i:</span>
<span id="cb16-106"><a href="#cb16-106" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb16-107"><a href="#cb16-107" aria-hidden="true" tabindex="-1"></a>            B_t_i <span class="op">=</span> (f_inte(i)<span class="op">/</span>f_inte(t))<span class="op">*</span>(np.exp(<span class="op">-</span>h<span class="op">*</span>(i<span class="op">-</span>t)))   </span>
<span id="cb16-108"><a href="#cb16-108" aria-hidden="true" tabindex="-1"></a>            ps_i <span class="op">=</span> np.exp(<span class="op">-</span>(s<span class="op">+</span>h)<span class="op">*</span>(i<span class="op">-</span>t))</span>
<span id="cb16-109"><a href="#cb16-109" aria-hidden="true" tabindex="-1"></a>           </span>
<span id="cb16-110"><a href="#cb16-110" aria-hidden="true" tabindex="-1"></a>            pt <span class="op">+=</span> c <span class="op">*</span>B_t_i <span class="op">*</span> ps_i</span>
<span id="cb16-111"><a href="#cb16-111" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> t<span class="op">&lt;</span>T:</span>
<span id="cb16-112"><a href="#cb16-112" aria-hidden="true" tabindex="-1"></a>        B_t_T <span class="op">=</span> (f_inte(T)<span class="op">/</span>f_inte(t))<span class="op">*</span>(np.exp(<span class="op">-</span>h<span class="op">*</span>(T<span class="op">-</span>t)))</span>
<span id="cb16-113"><a href="#cb16-113" aria-hidden="true" tabindex="-1"></a>        ps_T  <span class="op">=</span> np.exp(<span class="op">-</span>(s<span class="op">+</span>h)<span class="op">*</span>(T<span class="op">-</span>t))</span>
<span id="cb16-114"><a href="#cb16-114" aria-hidden="true" tabindex="-1"></a>        pt   <span class="op">+=</span> B_t_T <span class="op">*</span> ps_T</span>
<span id="cb16-115"><a href="#cb16-115" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-33" class="cell" data-execution_count="248">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tracer pt en fonction de t pour c=0.03, s=0.01 et T=10 avec un pas de 0.1</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>coupon <span class="op">=</span> <span class="fl">0.03</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>spread <span class="op">=</span> <span class="fl">0.01</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>maturite <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>plage_t <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">10</span>, <span class="fl">0.1</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>plage_pt <span class="op">=</span> [prix_obligation(t, c<span class="op">=</span>coupon, s<span class="op">=</span>spread, T<span class="op">=</span>maturite, data<span class="op">=</span>essai) <span class="cf">for</span> t <span class="kw">in</span> plage_t]</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>plage_clean <span class="op">=</span> [clean_price(t, c<span class="op">=</span>coupon, s<span class="op">=</span>spread, T<span class="op">=</span>maturite, data<span class="op">=</span>essai) <span class="cf">for</span> t <span class="kw">in</span> plage_t]</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>plt.plot(plage_t, plage_pt, label<span class="op">=</span><span class="st">'Dirty Price'</span>)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>plt.plot(plage_t, plage_clean, label<span class="op">=</span><span class="st">'Clean Price'</span>)</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'t'</span>)</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'pt'</span>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Prix de l</span><span class="ch">\'</span><span class="st">obligation en fonction de t'</span>)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-18-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Sur la courbe ci-dessus, nous avons représenté le Dirty price en bleu et le clean price en orange. Nous remarquons que sur le Dirty price, il y a des décrochages, des discontinuités qui correspondent à l’intégration de coupons. Par contre, le clean prize qui correspond au Dirty price auquel on a retiré le coupon couru est continu et peut permettre une analyse de risques.</p>
<section id="sensibilité-du-prix-dune-obligation-en-fonction-du-taux-dintérêt-et-du-spread-de-crédit" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="sensibilité-du-prix-dune-obligation-en-fonction-du-taux-dintérêt-et-du-spread-de-crédit"><span class="header-section-number">2.1</span> Sensibilité du prix d’une obligation en fonction du taux d’intérêt et du spread de crédit</h2>
<p>Cette fois-ci, nous allons étudier la sensibilité du prix d’obligations en fonction du taux d’intérêt et le spread de crédit.</p>
<div id="cell-36" class="cell" data-execution_count="249">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tracer pt en fonction de t pour c=0.03, s=0.01 et T=10 avec un pas de 0.1</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>temps_initial <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Supposons que vos fonctions et variables sont déjà définies correctement</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">4</span>))  <span class="co"># Crée une figure et deux subplots (axes)</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>plage_h <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.001</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Supposons que prix_obligation_spread soit votre fonction personnalisée</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>plage_pt_h <span class="op">=</span> [prix_obligation_spread(temps_initial,coupon, spread, maturite, h, essai) <span class="cf">for</span> h <span class="kw">in</span> plage_h]</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>plage_pt__h <span class="op">=</span> [prix_obligation_spread(temps_initial,coupon, spread, maturite, <span class="op">-</span>h, essai) <span class="cf">for</span> h <span class="kw">in</span> plage_h]</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Utiliser les méthodes de l'objet Axes pour tracer</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].plot(plage_h, plage_pt_h,color<span class="op">=</span><span class="st">'green'</span>)</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].plot(plage_h, plage_pt__h,color<span class="op">=</span><span class="st">'green'</span>)</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_xlabel(<span class="st">'h'</span>)</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_ylabel(<span class="st">'p0'</span>)</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_xlabel(<span class="st">'h'</span>)</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_ylabel(<span class="st">'p0'</span>)</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">'Sensibilité au taux pour h positifs'</span>)</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">'Sensibilité  au taux pour h négatifs'</span>)</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()  <span class="co"># Ajuste automatiquement le layout pour éviter le chevauchement</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>plt.show()</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-19-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-37" class="cell" data-execution_count="250">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tracer pt en fonction de t pour c=0.03, s=0.01 et T=10 avec un pas de 0.1</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>temp_initial <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>fig,ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>,<span class="dv">4</span>))</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>plage_h <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.001</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>plage_pt_h <span class="op">=</span> [prix_obligation_spread(temp_initial, coupon, spread, maturite, h, essai) <span class="cf">for</span> h <span class="kw">in</span> plage_h]</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>plage__pt_h <span class="op">=</span> [prix_obligation_spread(temp_initial, coupon, spread, maturite, <span class="op">-</span>h, essai) <span class="cf">for</span> h <span class="kw">in</span> plage_h]</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].plot(plage_h, plage_pt_h,color<span class="op">=</span><span class="st">'r'</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].plot(plage_h, plage__pt_h,color<span class="op">=</span><span class="st">'r'</span>)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_xlabel(<span class="st">'h'</span>)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_ylabel(<span class="st">'p0'</span>)</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_xlabel(<span class="st">'h'</span>)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_ylabel(<span class="st">'p0'</span>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="st">'Sensibilité au spread pour h positifs'</span>)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="st">'Sensibilité  au spread pour h négatifs'</span>)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()  <span class="co"># Ajuste automatiquement le layout pour éviter le chevauchement</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-20-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Il en ressort des graphiques ci-dessus qu’une augmentation(diminution) du taux d’intérêt ou du spread de crédit conduit à une augmentation(diminution) du prix de l’obligation zéro coupon.</p>
</section>
</section>
<section id="calcul-de-la-duration-à-t-0-avec-h-0.00001" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Calcul de la duration à t =0 avec h = 0.00001</h1>
<p>La formule de la duration est donnée par la formule ci-après:</p>
<p><span class="math display">\[D = -\frac{1}{P} \frac{P_h - P}{h}\]</span></p>
<p>La duration exprime comment un portefeuille est sensible aux variations des taux d’intérêts. Un portefeuille avec une duration de 5 signifie que si un peu d’intérêt augmente de 1% la valeur du portefeuille va diminuer de 5%. La duration de notre portefeuille est de 8,75, cela signifie que si le taux d’intérêt augmente de 1%, la valeur de notre portefeuille va diminuer de 8,75%.</p>
<div id="cell-41" class="cell" data-execution_count="251">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcul de la duration</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>h <span class="op">=</span> <span class="fl">0.0001</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>P_h <span class="op">=</span> prix_obligation_shift(temp_initial, coupon, spread, maturite, h, essai)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>P <span class="op">=</span> prix_obligation(temp_initial, coupon, spread, maturite, essai)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>D <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">/</span>P <span class="op">*</span> (P_h <span class="op">-</span> P)<span class="op">/</span>h</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"La duration de l'obligation est </span><span class="sc">{</span>D<span class="sc">:.2f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>La duration de l'obligation est 8.75</code></pre>
</div>
</div>
<section id="valorisation-dun-produit-exotique-avec-hull-white" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="valorisation-dun-produit-exotique-avec-hull-white"><span class="header-section-number">3.1</span> Valorisation d’un produit Exotique avec Hull White</h2>
<p>Dans cette partie, nous allons dans un premier temps définir le prix de n’importe quel zéro-coupon c’est-à-dire trouver une forme analytique de B(t,T)-qui est le prix d’une obligation sans coupon définie par la valeur en t d’une unité monétaire payée à l’échéance. Ensuite, nous allons nous hedger contre le risque de taux d’intérêt en utilisant les caplets. Un caplet est une option d’achat sur un taux d’intérêt. Il est utilisé pour se protéger contre une hausse des taux d’intérêt. Nous allons calibrer sa volatilité. Enfin, nous utiliserons cette volatilité et des simulations de Monte Carlo pour calibrer les niveaux de strike d’un caplet pour se protéger de la hausse d’un Libor. Nous savons par exemple que si le Libor est supérieur au strike, l’option est exercée.</p>
<section id="calcul-de-btt-avec-hull-white" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="calcul-de-btt-avec-hull-white"><span class="header-section-number">3.1.1</span> Calcul de B(t,T) avec Hull White</h3>
<p>Le modèle de Hull et White est une extension du modèle de Vasicek. Sous le modèle de Hull et White, le taux court est donné par la formule suivante: <span class="math display">\[dr_t=\lambda (\theta -  r_t)dt+\sigma dW_t\]</span></p>
<p>Nous allons étudier la partie simplifiée avec <span class="math inline">\(\lambda=0\)</span></p>
<p>Montrer tout d’abord que : La formule pour calculer (B(t,T)) est donnée par :</p>
<p><span class="math display">\[B(t,T) = \frac{B(0,T)}{B(0,t)} \exp \left( -(T-t) X_t - \frac{1}{2} (T-t)^2 \sigma^2 t \right)\]</span></p>
<p>où l’équation différentielle stochastique pour (X_t) est :</p>
<p><span class="math display">\[dX_t = \sigma^2 t \, dt + \sigma dW_t\]</span></p>
<p>Nous avons déjà montrer dans le cours que :</p>
<p><span class="math display">\[B(t,T) = \frac{B(0,T)}{B(0,t)} \exp \left( -\beta(t,T) X_t - \frac{1}{2} \beta(t,T)^2 \phi(t) \right)\]</span></p>
<p>Avec : <span class="math display">\[\phi(t) =  \exp(-2\lambda t)*\int_0^t \sigma^2 \exp(2\lambda s) ds = \frac{\sigma^2}{2\lambda} (1-\exp(-2\lambda t))\]</span> et <span class="math display">\[\beta(t,T) = \frac{1}{\lambda} (1-\exp(-\lambda(T-t)))\]</span></p>
<p><span class="math display">\[dX_t = (\phi(t)- \lambda X_t)dt + \sigma dW_t\]</span></p>
<p>Lorsque <span class="math inline">\(\lambda=0\)</span>, nous avons : <span class="math inline">\(\phi(t) = \sigma^2 t\)</span> et <span class="math inline">\(\beta(t,T) = T-t\)</span></p>
<p>Donc la formule pour calculer (B(t,T)) est donnée par :</p>
<p><span class="math display">\[B(t,T) = \frac{B(0,T)}{B(0,t)} \exp \left( -(T-t) X_t - \frac{1}{2} (T-t)^2 \sigma^2 t \right)\]</span> et <span class="math display">\[dX_t = \sigma^2 t \, dt + \sigma dW_t\]</span></p>
</section>
<section id="calibration-de-la-volatilité-pour-un-strike-k4-une-maturité-t1-et-deltala-fraction-de-lannée-12" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="calibration-de-la-volatilité-pour-un-strike-k4-une-maturité-t1-et-deltala-fraction-de-lannée-12"><span class="header-section-number">3.1.2</span> Calibration de la volatilité pour un strike K=4%, une maturité T=1 et <span class="math inline">\(\delta\)</span>(la fraction de l’année) = 1/2</h3>
<p>Le prix du caplet dans le modèle de Hull et White est donné par la formule suivante:</p>
<p><span class="math display">\[\text{Caplet}^{HW1F} = B(0, T + \delta) \cdot \text{Black}\left(\text{Fwd} = \frac{B(0, T)}{B(0, T + \delta)}, \text{maturité} = T, \text{vol} = \sigma\delta, \text{Strike} = 1 + \delta K\right)\]</span></p>
<p>Et le prix du caplet du marché est obtenu par la formule suivante:</p>
<p><span class="math display">\[\text{Caplet}^{\text{Marché}} = \delta \cdot B(0, T + \delta) \cdot \text{Black}\left(\text{Fwd} = \frac{1}{\delta} \left( \frac{B(0, T)}{B(0, T + \delta)} - 1 \right), \text{maturité} = T, \text{vol} = \text{vol\_implicite}, \text{Strike} = K\right)\]</span></p>
<p>Black est la formule de Black Scholes qui est utilisée pour calculer le prix d’une option européenne et la vol_implicite est la volatilité implicite qui sera considérée égale à 25%.</p>
<p>Calibrer <span class="math inline">\(\sigma\)</span>, revient à déterminer la volatilité qui fait correspondre le prix du caplet du marché au prix du caplet dans le modèle de Hull et White. Nous utiliserons pour ce fait la méthode de Newton.</p>
<div id="cell-44" class="cell" data-execution_count="252">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.optimize <span class="im">import</span> newton</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ecrire une fonction qui calcule le prix d'un call européen</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> blackScholesCall(S,K,T,r,sigma):</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    d1 <span class="op">=</span> (np.log(S<span class="op">/</span>K) <span class="op">+</span> (r <span class="op">+</span> <span class="fl">0.5</span> <span class="op">*</span> sigma<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span> T) <span class="op">/</span> (sigma <span class="op">*</span> np.sqrt(T))</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    d2 <span class="op">=</span> d1 <span class="op">-</span> sigma <span class="op">*</span> np.sqrt(T)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> S <span class="op">*</span> norm.cdf(d1) <span class="op">-</span> K <span class="op">*</span> np.exp(<span class="op">-</span>r <span class="op">*</span> T) <span class="op">*</span> norm.cdf(d2)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prix_caplet(K,T,delta,sigma,data<span class="op">=</span> essai):</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    f_interpolation <span class="op">=</span> interpolate.interp1d(data[<span class="st">'T'</span>], data[<span class="st">'B(0,T)'</span>])</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    B_0_T_delta <span class="op">=</span> f_interpolation((T <span class="op">+</span> delta))</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>    B_0_T <span class="op">=</span> f_interpolation(T)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>    fwd <span class="op">=</span> B_0_T<span class="op">/</span>B_0_T_delta</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>    vol <span class="op">=</span> sigma<span class="op">*</span> delta</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    strike <span class="op">=</span> <span class="dv">1</span><span class="op">+</span>delta<span class="op">*</span>K</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>    black <span class="op">=</span> blackScholesCall(S<span class="op">=</span>fwd, K<span class="op">=</span>strike, T<span class="op">=</span>T, r<span class="op">=</span><span class="dv">0</span>, sigma<span class="op">=</span>vol)</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>    prix_caplet <span class="op">=</span> B_0_T_delta  <span class="op">*</span> black</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> prix_caplet</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prix_caplet_maket(K,T,delta,sigma,data<span class="op">=</span> essai):</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    f_interpolation <span class="op">=</span> interpolate.interp1d(data[<span class="st">'T'</span>], data[<span class="st">'B(0,T)'</span>])</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>    B_0_T_delta <span class="op">=</span> f_interpolation((T <span class="op">+</span> delta))</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    B_0_T <span class="op">=</span> f_interpolation(T)</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    fwd <span class="op">=</span> (B_0_T<span class="op">/</span>B_0_T_delta<span class="op">-</span><span class="dv">1</span>)<span class="op">*</span>(<span class="dv">1</span><span class="op">/</span>delta)</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>    black <span class="op">=</span> blackScholesCall(S<span class="op">=</span>fwd, K<span class="op">=</span>K, T<span class="op">=</span>T, r<span class="op">=</span><span class="dv">0</span>, sigma<span class="op">=</span>sigma)</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>    prix_caplet_maket <span class="op">=</span> B_0_T_delta  <span class="op">*</span> black<span class="op">*</span>delta</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> prix_caplet_maket</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> implied_volatility(K,T,delta,sigma,data,prix_caplet_maket):</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>    difference <span class="op">=</span> <span class="kw">lambda</span> sigma:np.<span class="bu">abs</span>( prix_caplet_maket <span class="op">-</span> prix_caplet(K,T,delta,sigma,data))</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> newton(difference, sigma)</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>    </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-45" class="cell" data-execution_count="253">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>strike <span class="op">=</span> <span class="fl">0.04</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>delta <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>sigma <span class="op">=</span> <span class="fl">0.25</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>prix_caplet_maket <span class="op">=</span> prix_caplet_maket(K<span class="op">=</span>strike,T<span class="op">=</span>maturite,delta <span class="op">=</span>delta,sigma<span class="op">=</span>sigma,data <span class="op">=</span> essai)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-46" class="cell" data-execution_count="254">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Le prix du caplet est </span><span class="sc">{</span>prix_caplet_maket<span class="sc">:.6f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Le prix du caplet est 0.002126</code></pre>
</div>
</div>
<div id="cell-47" class="cell" data-execution_count="255">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>sigma_calibre <span class="op">=</span> implied_volatility(K<span class="op">=</span>strike,T<span class="op">=</span>maturite,delta <span class="op">=</span>delta,sigma<span class="op">=</span>sigma,data <span class="op">=</span> essai,prix_caplet_maket <span class="op">=</span> prix_caplet_maket)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"La volatilité implicite est </span><span class="sc">{</span>sigma_calibre<span class="op">*</span><span class="dv">100</span><span class="sc">:.2f}</span><span class="ss">%"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>La volatilité implicite est 0.81%</code></pre>
</div>
</div>
</section>
<section id="simulation-de-monte-carlo-pour-calibrer-les-niveaux-de-seuil" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="simulation-de-monte-carlo-pour-calibrer-les-niveaux-de-seuil"><span class="header-section-number">3.1.3</span> Simulation de Monte Carlo pour calibrer les niveaux de seuil</h3>
<p>Nous savons que le Libor entre deux instants i et i+1 est donné par la formule suivante:</p>
<p><span class="math display">\[L(i+1) = \frac{1}{\delta} \left( \frac{1}{B(0, {i+1})} - 1 \right)\]</span></p>
<p>Si nous utilisons la formule de générale de B(t,T) calculé précédemment avec t=i et T= i+1, nous obtenons la formule suivante:</p>
<p><span class="math display">\[L(i,i+1) = \frac{1}{\delta} \left( \frac{B(0,i)}{B(0, {i+1})} \exp(X_i + \frac{1}{2} \sigma^2 i) - 1 \right)\]</span></p>
<p><span class="math inline">\(\sigma\)</span> est la volatilité de Hull et White que nous avons calibré précédemment. Nous remarquons que, calibrer L revient à calibrer X qui est donnée par la formule suivante:</p>
<p><span class="math display">\[dX_t = \sigma^2 t \, dt + \sigma dW_t\]</span> Nous aurons pu calibrer X en prenant des pas très petits, comme dans le graphique ci-dessous, mais nous avons décidé de calibrer X avec des pas de 1 :</p>
<p><span class="math display">\[X_{i+1} = X_i + \sigma^2 (i+0.5) + \sigma Z\]</span></p>
<p>Où Z est une variable aléatoire suivant une loi normale centrée réduite.</p>
<div id="cell-49" class="cell" data-execution_count="256">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Paramètres de simulation</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="dv">10</span>  <span class="co"># Temps final</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">1000</span>  <span class="co"># Nombre de pas</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>dt <span class="op">=</span> T<span class="op">/</span>N  <span class="co"># Pas de temps</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>sigma <span class="op">=</span> sigma_calibre  <span class="co"># Volatilité</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialisation</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> np.linspace(<span class="dv">0</span>, T, N<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> np.zeros(N<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>Z <span class="op">=</span> np.random.normal(<span class="dv">0</span>, <span class="dv">1</span>, N)  <span class="co"># Génère N réalisations de N(0,1)</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulation par différences finies</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    X[i<span class="op">+</span><span class="dv">1</span>] <span class="op">=</span> X[i] <span class="op">+</span> sigma<span class="op">**</span><span class="dv">2</span> <span class="op">*</span> t[i] <span class="op">*</span> dt <span class="op">+</span> sigma <span class="op">*</span> np.sqrt(dt) <span class="op">*</span> Z[i]</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Affichage</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>plt.plot(t, X)</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Temps'</span>)</span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'$X_t$'</span>)</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Simulation de $X_t$ par différences finies'</span>)</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-26-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-50" class="cell" data-execution_count="257">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> simulation_monte_carlo(delta,sigma,essai,M,alpha):</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""La fonction simule le prix d'un caplet par la méthode de Monte Carlo</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co">        delta (float): Fréquence de paiement</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co">        sigma (float): Volatilité</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co">        essai (dataframe): ce dataframe contient les données des zéro coupon</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co">        M (float): Nombre de simulations</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co">        alpha (float): Taux de référence</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="co">        float: prix du caplet</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    mean_price <span class="op">=</span> []</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(M):</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>        Z <span class="op">=</span> np.random.normal(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">10</span>)  <span class="co"># Génère N réalisations de N(0,1)</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>        X <span class="op">=</span> np.zeros(<span class="dv">11</span>)</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>        f_interpolation <span class="op">=</span> interpolate.interp1d(essai[<span class="st">'T'</span>], essai[<span class="st">'B(0,T)'</span>])</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>        L_i_iplus1 <span class="op">=</span> np.zeros(<span class="dv">10</span>)</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">10</span>):</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>            X[j<span class="op">+</span><span class="dv">1</span>] <span class="op">=</span> X[j] <span class="op">+</span> sigma<span class="op">**</span><span class="dv">2</span><span class="op">*</span>(j<span class="op">+</span><span class="fl">0.5</span>) <span class="op">+</span> sigma<span class="op">*</span>Z[j]</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>        j_values <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">11</span>)  </span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>        B_0_i <span class="op">=</span> f_interpolation(j_values)</span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>        B_0_i_plus_1 <span class="op">=</span> f_interpolation(j_values <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>        exp_X_i_plus_sigma <span class="op">=</span> np.exp(X[<span class="dv">1</span>:] <span class="op">+</span> sigma<span class="op">**</span><span class="dv">2</span><span class="op">*</span><span class="fl">0.5</span><span class="op">*</span>j_values)</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>        L_i_iplus1 <span class="op">=</span> ((B_0_i <span class="op">/</span> B_0_i_plus_1) <span class="op">*</span> exp_X_i_plus_sigma <span class="op">-</span> <span class="dv">1</span>) <span class="op">*</span> (<span class="dv">1</span> <span class="op">/</span> delta)</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>        meanl <span class="op">=</span> np.mean(L_i_iplus1<span class="op">&gt;</span>alpha)</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>        mean_price.append(meanl)</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>    B_0_T <span class="op">=</span> f_interpolation(<span class="dv">10</span>)</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.mean(mean_price)<span class="op">*</span>B_0_T</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>        </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-51" class="cell" data-execution_count="258">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>delta <span class="op">=</span> <span class="fl">0.5</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>sigma <span class="op">=</span> sigma_calibre</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> essai</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>M <span class="op">=</span> <span class="dv">10000</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>alpha <span class="op">=</span> <span class="fl">0.03</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>simulation_monte_carlo(delta,sigma,data,M,alpha)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Pour un seuil de </span><span class="sc">{</span>alpha<span class="sc">}</span><span class="ss">, le prix du flux résultant de la simulation Monte Carlo</span><span class="ch">\</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="ss"> est : </span><span class="sc">{</span>simulation_monte_carlo(delta, sigma, data, M, alpha)<span class="sc">:.2f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Pour un seuil de 0.03, le prix du flux résultant de la simulation Monte Carlo est : 0.58</code></pre>
</div>
</div>
<section id="variation-du-prix-du-flux-en-fonction-du-seuil-alpha" class="level4" data-number="3.1.3.1">
<h4 data-number="3.1.3.1" class="anchored" data-anchor-id="variation-du-prix-du-flux-en-fonction-du-seuil-alpha"><span class="header-section-number">3.1.3.1</span> variation du prix du flux en fonction du seuil alpha</h4>
<p>Nous avons représenté ci-dessous le prix du flux en fonction de différents niveaux de seuil alpha. Il est ressort que le prix est décroissant en fonction du seuil alpha. Le produit est donc plus cher lorsque le seuil alpha est plus bas -inférieur à 4% et plus cher lorsque le strile est plus élevé -supérieur à 4%.</p>
<p>Cette analyse peut permettre de développer des stratégies d’investissement pour les investisseurs et les émetteurs.</p>
<div id="cell-53" class="cell" data-execution_count="259">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>plage_alpha <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="fl">0.11</span>, <span class="fl">0.01</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>plage_prix <span class="op">=</span> [simulation_monte_carlo(delta,sigma,data,M,alpha) <span class="cf">for</span> alpha <span class="kw">in</span> plage_alpha]</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>plt.plot(plage_alpha, plage_prix)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'strike'</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'prix du flux'</span>)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Prix du flux en fonction du strike'</span>)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>plt.axhline(y<span class="op">=</span><span class="fl">0.5</span>, color<span class="op">=</span><span class="st">'r'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>plt.axvline(x<span class="op">=</span><span class="fl">0.04</span>, color<span class="op">=</span><span class="st">'r'</span>, linestyle<span class="op">=</span><span class="st">'--'</span>)</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>plt.xticks([<span class="fl">0.01</span>,<span class="fl">0.02</span>,<span class="fl">0.03</span>,<span class="fl">0.04</span>,<span class="fl">0.05</span>,<span class="fl">0.06</span>,<span class="fl">0.07</span>,<span class="fl">0.08</span>,<span class="fl">0.09</span>,<span class="fl">0.1</span>])</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-29-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="valorisation-dune-obligation-avec-clause-de-rappel-avec-hull-white." class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="valorisation-dune-obligation-avec-clause-de-rappel-avec-hull-white."><span class="header-section-number">3.2</span> Valorisation d’une obligation avec clause de rappel avec Hull White.</h2>
<p>La valorisation d’une obligation avec une clause de rappel implique l’évaluation d’une obligation qui donne à l’émetteur le droit, mais pas l’obligation de rembourser le principal de l’obligation avant l’échéance à un prix prédéterminé, appelé prix de rappel, cette caractéristique offre à l’émetteur de l’obligation, la flexibilité de refinancer sa dette à un coût inférieur si les taux d’intérêt du marché baissent.</p>
<p>Dans cette partie, avec un exemple simple, nous allons valoriser le prix d’une option sur une obligation avec clause de rappel. Nous emploierons pour cela des simulations de Monte-Carlo afin de déterminer le prix de l’obligation avec clause de rappel. Par la suite, nous comparerons cette obligation à une obligation classique sans clause de rappel, afin de déterminer le prix d’une option de rappel elle-même. Enfin, nous procéderons à diverses analyses de sensibilité pour évaluer l’impact de différents facteurs sur la valorisation.</p>
<section id="modèle-de-hull-et-white" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="modèle-de-hull-et-white"><span class="header-section-number">3.2.1</span> Modèle de Hull et White</h3>
<p>Nous avons déjà montrer dans le cours que :</p>
<p><span class="math display">\[B(t,T) = \frac{B(0,T)}{B(0,t)} \exp \left(-(T-t) X_t - \frac{1}{2} (T-t)^2 \sigma^2 t \right)\]</span></p>
<p>Avec : <span class="math display">\[dX_t = \sigma^2 t \, dt + \sigma dW_t\]</span></p>
<p>si on pose <span class="math inline">\(X_0 = 0\)</span>, nous avons : En intégrant l’équation différentielle stochastique pour <span class="math inline">\(X_t\)</span>, nous obtenons la formule suivante: <span class="math display">\[X_t = \sigma^2 \frac{t^2}{2} + \sigma W_t\]</span></p>
<p>Comme <span class="math inline">\(W_t\)</span> est un mouvement brownien, nous avons que <span class="math inline">\(W_t\)</span> est une variable aléatoire suivant une loi normale centrée de variance t. donc si on pose <span class="math inline">\(U =\sqrt{t}W_t\)</span>, nous avons que U est une variable aléatoire suivant une loi normale centrée de variance 1. Ainsi on trouve que notre modèle de Hull et White s’écrira sous la forme suivante:</p>
<p><span class="math display">\[B(t,T,U,\sigma) = \frac{B(0,T)}{B(0,t)} \exp \left(-(T-t)(\frac{1}{2} \sigma^2 t^2+\sigma \sqrt(t)U)- \frac{1}{2} (T-t)^2 \sigma^2 t \right)\]</span></p>
<p>Ainsi nous pouvons calibrer par monte-Carlo le prix de l’obligation avec clause de rappel. Dans un prix temps la fonction de valorisation de l’obligation est donnée par la formule suivante: <span class="math display">\[P(t, T, U, \sigma) = \sum_{i=1}^{T} \left[ c \cdot B(t, i, U, \sigma) \cdot PS(i) \cdot \mathbf{1}_{(t &lt; i)} \right] + B(t, T, U, \sigma) \cdot PS(T) \cdot \mathbf{1}_{(t &lt; T)}\]</span></p>
<p>avec <span class="math inline">\(PS(t)\)</span> la fonction de survie qui est donnée par la formule suivante: <span class="math display">\[PS(i)=\exp(-s \cdot(i-t))\]</span></p>
<p>Le prix de l’obligation avec clause de rappel est donné par la formule suivante:</p>
<p>comment on écrire le minimum de deux valeurs dans une fonction mathématique en latex?</p>
<p><span class="math display">\[P(t,T,\sigma)^c = \frac{1}{N} \sum_{i=1}^{N}  \min \left( P(t, T, U, \sigma) , 1 \right)\]</span></p>
<p>Avec N le nombre de simulations.</p>
<p>Nous avons implémenté sur prix le code du ci-dessous.</p>
<div id="cell-55" class="cell" data-execution_count="260">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> B(t, T, U, sigma,data,h_taux,h_sigma):</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Calcule la valeur de B(t, T, U, sigma) selon la formule spécifiée.</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co">    Paramètres:</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="co">    - t : Temps actuel.</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co">    - T : Temps final.</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co">    - U : Variable aléatoire ou paramètre spécifique au modèle.</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="co">    - sigma : Volatilité.</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="co">    Retourne:</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="co">    - La valeur calculée de B(t, T, U, sigma).</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>    f_inte <span class="op">=</span> interpolate.interp1d(data[<span class="st">'T'</span>], data[<span class="st">'B(0,T)'</span>])</span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>    B_0_T <span class="op">=</span> f_inte(T)<span class="op">*</span>np.exp(<span class="op">-</span>h_taux<span class="op">*</span>T)</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>    B_0_t <span class="op">=</span> f_inte(t)<span class="op">*</span>np.exp(<span class="op">-</span>h_taux<span class="op">*</span>t)</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>    sigma<span class="op">+=</span>h_sigma</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>    exp_part <span class="op">=</span> np.exp(<span class="op">-</span><span class="dv">1</span> <span class="op">*</span> (T <span class="op">-</span> t) <span class="op">*</span> (<span class="fl">0.5</span> <span class="op">*</span> sigma<span class="op">**</span><span class="dv">2</span> <span class="op">*</span> t<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> sigma <span class="op">*</span> np.sqrt(t) <span class="op">*</span> U) <span class="op">-</span> <span class="fl">0.5</span> <span class="op">*</span> (T <span class="op">-</span> t)<span class="op">**</span><span class="dv">2</span> <span class="op">*</span> sigma<span class="op">**</span><span class="dv">2</span> <span class="op">*</span> t)</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (B_0_T <span class="op">/</span> B_0_t) <span class="op">*</span> exp_part</span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> prix_obligation_Hull_White(c,s,t,T,U,sigma,data,h_taux,h_sigma):</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a><span class="co">    Calcule le prix d'une obligation.</span></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a><span class="co">    paramètres:</span></span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a><span class="co">    - t: Taux d'intérêt sans risque</span></span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a><span class="co">    - c: Coupon de l'obligation</span></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a><span class="co">    - s:spread</span></span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a><span class="co">    - T: Maturité de l'obligation</span></span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a><span class="co">    - U : Variable aléatoire ou paramètre spécifique au modèle.</span></span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a><span class="co">    - sigma : Volatilité.</span></span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a><span class="co">    - data : dataframe contenant les données</span></span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a><span class="co">    - Prix de l'obligation</span></span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a>    prix <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span>  <span class="bu">range</span>(<span class="dv">1</span>,T<span class="op">+</span><span class="dv">1</span>):</span>
<span id="cb33-43"><a href="#cb33-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> t<span class="op">&lt;</span>i:</span>
<span id="cb33-44"><a href="#cb33-44" aria-hidden="true" tabindex="-1"></a>            ps_i <span class="op">=</span> np.exp(<span class="op">-</span>s<span class="op">*</span>(i<span class="op">-</span>t))</span>
<span id="cb33-45"><a href="#cb33-45" aria-hidden="true" tabindex="-1"></a>            b_t_i <span class="op">=</span> B(t,i,U,sigma,data,h_taux,h_sigma)</span>
<span id="cb33-46"><a href="#cb33-46" aria-hidden="true" tabindex="-1"></a>            prix <span class="op">+=</span> c<span class="op">*</span>b_t_i<span class="op">*</span>ps_i</span>
<span id="cb33-47"><a href="#cb33-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> t<span class="op">&lt;</span>T:</span>
<span id="cb33-48"><a href="#cb33-48" aria-hidden="true" tabindex="-1"></a>        ps_T <span class="op">=</span> np.exp(<span class="op">-</span>s<span class="op">*</span>(T<span class="op">-</span>t))</span>
<span id="cb33-49"><a href="#cb33-49" aria-hidden="true" tabindex="-1"></a>        b_t_T <span class="op">=</span> B(t,T,U,sigma,data,h_taux,h_sigma)</span>
<span id="cb33-50"><a href="#cb33-50" aria-hidden="true" tabindex="-1"></a>        prix <span class="op">+=</span> b_t_T<span class="op">*</span>ps_T</span>
<span id="cb33-51"><a href="#cb33-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> prix   </span>
<span id="cb33-52"><a href="#cb33-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-53"><a href="#cb33-53" aria-hidden="true" tabindex="-1"></a><span class="co"># simulation des prix</span></span>
<span id="cb33-54"><a href="#cb33-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-55"><a href="#cb33-55" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> simulation_prix(c,s,t,T,sigma,data,N,h_taux,h_sigma):</span>
<span id="cb33-56"><a href="#cb33-56" aria-hidden="true" tabindex="-1"></a>    liste_prix <span class="op">=</span> []</span>
<span id="cb33-57"><a href="#cb33-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb33-58"><a href="#cb33-58" aria-hidden="true" tabindex="-1"></a>        U <span class="op">=</span> np.random.normal(<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb33-59"><a href="#cb33-59" aria-hidden="true" tabindex="-1"></a>        prix <span class="op">=</span> prix_obligation_Hull_White(c,s,t,T,U,sigma,data,h_taux,h_sigma)</span>
<span id="cb33-60"><a href="#cb33-60" aria-hidden="true" tabindex="-1"></a>        liste_prix.append(prix)</span>
<span id="cb33-61"><a href="#cb33-61" aria-hidden="true" tabindex="-1"></a>    prix_ajuste <span class="op">=</span> np.minimum(liste_prix,<span class="dv">1</span>)</span>
<span id="cb33-62"><a href="#cb33-62" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-63"><a href="#cb33-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-64"><a href="#cb33-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> np.mean(prix_ajuste)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="cell-56" class="cell" data-execution_count="261">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>Nombre_simulations <span class="op">=</span> <span class="dv">10000</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>temps_exercice <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>sigma <span class="op">=</span><span class="fl">0.01</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>prix_c <span class="op">=</span>simulation_prix(c<span class="op">=</span>coupon,s<span class="op">=</span>spread,t<span class="op">=</span>temps_exercice,T<span class="op">=</span>maturite,</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>                        sigma<span class="op">=</span>sigma,data<span class="op">=</span>essai,N<span class="op">=</span>Nombre_simulations,</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>                        h_taux<span class="op">=</span><span class="fl">0.01</span>,h_sigma<span class="op">=</span><span class="fl">0.01</span>)</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Le prix de l'obligation de rappel est de  </span><span class="sc">{</span>prix_c<span class="sc">:.2f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Le prix de l'obligation de rappel est de  0.87</code></pre>
</div>
</div>
</section>
<section id="calcul-du-prix-de-loption-de-rappel" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="calcul-du-prix-de-loption-de-rappel"><span class="header-section-number">3.2.2</span> Calcul du prix de l’option de rappel</h3>
<p>Nous avons initialement estimé la valeur d’une obligation zéro-coupon, sa clause de rappel Par la suite, la valorisation d’une obligation incorporant une clause de rappel a été réalisée.Afin de quantifier le coût de l’option de rappel, nous procéderons à la soustraction des 2 prix précédemment obtenus, puis à l’actualisation du résultat à la date d’exercices. Le prix de l’option de rappel est donné par la formule suivante:</p>
<p><span class="math display">\[\text{option} = B(0,t) \left[ P(t,T) - P(t,T,\sigma)^c \right]\]</span></p>
<p>Rappelons que P(t,T) est donné par la formule suivante:</p>
<p><span class="math display">\[P_t = \sum_{i=1}^{T} \left[ c \cdot B(t,i) \cdot PS(i) \cdot \mathbf{1}_{(t &lt; i)} \right] + B(t,T) \cdot PS(T) \cdot \mathbf{1}_{(t &lt; T)}
\]</span></p>
<p>Nous avons implémenté le prix de cette option dans le code ci-dessous.</p>
<div id="cell-58" class="cell" data-execution_count="262">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Créeons une fonction qui calcule le prix d'une option</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calcule_option(c,s,t,T,sigma,data,N,h_taux<span class="op">=</span><span class="dv">0</span>,h_sigma<span class="op">=</span><span class="dv">0</span>):</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    fonction_interpolation <span class="op">=</span> interpolate.interp1d(data[<span class="st">'T'</span>], data[<span class="st">'B(0,T)'</span>])</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    B_0_t <span class="op">=</span> fonction_interpolation(t)</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    prix_c <span class="op">=</span>simulation_prix(c,s,t,T,sigma,data,N,h_taux,h_sigma)</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    prix <span class="op">=</span> prix_obligation_shift(t, c, s,T, h_taux,data) </span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    option <span class="op">=</span> B_0_t <span class="op">*</span> (prix <span class="op">-</span> prix_c)</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> option</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>option <span class="op">=</span> calcule_option(c<span class="op">=</span>coupon,s<span class="op">=</span>spread,t<span class="op">=</span>temps_exercice,T<span class="op">=</span>maturite,</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>                        sigma<span class="op">=</span>sigma,data<span class="op">=</span>essai,N<span class="op">=</span>Nombre_simulations,</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>                        h_taux<span class="op">=</span><span class="fl">0.01</span>,h_sigma<span class="op">=</span><span class="fl">0.01</span>)</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Le prix de l'option est </span><span class="sc">{</span>option<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Le prix de l'option est 0.05313592167256735</code></pre>
</div>
</div>
<div id="cell-59" class="cell" data-execution_count="263">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>plage_t<span class="op">=</span>np.arange(<span class="dv">1</span>,<span class="dv">10</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>plage_option <span class="op">=</span> [calcule_option(c<span class="op">=</span>coupon,s<span class="op">=</span>spread,t<span class="op">=</span>t,T<span class="op">=</span>maturite,sigma<span class="op">=</span>sigma_calibre,data<span class="op">=</span>essai,N<span class="op">=</span>Nombre_simulations) <span class="cf">for</span> t <span class="kw">in</span> plage_t]</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>plt.plot(plage_t, plage_option)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'t'</span>)</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Option'</span>)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Prix de l</span><span class="ch">\'</span><span class="st">option en fonction de t'</span>)</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-33-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Le graphique ci-dessus présente le prix de l’option du rappel en fonction du temps. Nous remarquons que si l’émetteur exerce son option prématurément, il devra payer un prix plus élevé. Cependant, lorsqu’on se rapproche de la maturité de l’obligation, le prix de l’option de rappel diminue.</p>
</section>
<section id="sensibilité-du-prix-de-loption-de-rappel-en-fonction-de-la-date-dexercie-de-la-volatilité-et-du-taux-dintérêt." class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="sensibilité-du-prix-de-loption-de-rappel-en-fonction-de-la-date-dexercie-de-la-volatilité-et-du-taux-dintérêt."><span class="header-section-number">3.2.3</span> Sensibilité du prix de l’option de rappel en fonction de la date d’exercie, de la volatilité et du taux d’intérêt.</h3>
<section id="sensibilité-du-prix-de-loption-de-rappel-en-fonction-de-la-volatilité." class="level4" data-number="3.2.3.1">
<h4 data-number="3.2.3.1" class="anchored" data-anchor-id="sensibilité-du-prix-de-loption-de-rappel-en-fonction-de-la-volatilité."><span class="header-section-number">3.2.3.1</span> Sensibilité du prix de l’option de rappel en fonction de la volatilité.</h4>
<p>Le code ci-dessous représente la sensibilité du prix de l’option en fonction de la volatilité. Comme nous pouvons le constater, une augmentation de la volatilité conduit à une augmentation du prix de l’option de rappel.</p>
<div id="cell-61" class="cell" data-execution_count="264">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Je veux une plage de volatilité {0%,0.25%,0.5%,...,5%}</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>pas <span class="op">=</span> <span class="fl">0.25</span> <span class="op">/</span> <span class="dv">100</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>plage_sigma <span class="op">=</span>  np.arange(<span class="dv">0</span>, <span class="dv">10</span> <span class="op">*</span> pas, pas)</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>plage_option_sigma <span class="op">=</span> [calcule_option(c<span class="op">=</span><span class="fl">0.03</span>,s<span class="op">=</span><span class="fl">0.01</span>,t<span class="op">=</span><span class="dv">5</span>,T<span class="op">=</span><span class="dv">10</span>,sigma<span class="op">=</span>sigma,data<span class="op">=</span>essai,N<span class="op">=</span><span class="dv">10000</span>) <span class="cf">for</span> sigma <span class="kw">in</span> plage_sigma]</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>plt.plot(plage_sigma, plage_option_sigma)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Volatilité'</span>)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Option'</span>)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Prix de l</span><span class="ch">\'</span><span class="st">option en fonction de la volatilité'</span>)</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-34-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="sensibilité-du-prix-de-loption-de-rappel-en-fonction-du-taux-dintérêt." class="level4" data-number="3.2.3.2">
<h4 data-number="3.2.3.2" class="anchored" data-anchor-id="sensibilité-du-prix-de-loption-de-rappel-en-fonction-du-taux-dintérêt."><span class="header-section-number">3.2.3.2</span> Sensibilité du prix de l’option de rappel en fonction du taux d’intérêt.</h4>
<p>Le code ci-dessous représente la sensibilité du prix de l’option en fonction du taux d’intérêt. Comme nous pouvons le constater, une augmentation infinitésimale du taux d’intérêt conduit à une diminution du prix de l’option de rappel.</p>
<div id="cell-63" class="cell" data-execution_count="265">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>plage_h_taux <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="fl">0.11</span>, <span class="fl">0.01</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>plage_option_h_taux <span class="op">=</span> [calcule_option(c<span class="op">=</span><span class="fl">0.03</span>,s<span class="op">=</span><span class="fl">0.01</span>,t<span class="op">=</span><span class="dv">5</span>,T<span class="op">=</span><span class="dv">10</span>,sigma<span class="op">=</span><span class="fl">0.01</span>,data<span class="op">=</span>essai,N<span class="op">=</span><span class="dv">10000</span>,h_taux<span class="op">=</span>h_taux) <span class="cf">for</span> h_taux <span class="kw">in</span> plage_h_taux]</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>plt.plot(plage_h_taux, plage_option_h_taux)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Option'</span>)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Prix de l'option en fonction d'une variation du taux d'intérêt"</span>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>plt.xticks([<span class="dv">0</span>,<span class="fl">0.05</span>,<span class="fl">0.1</span>])</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-35-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="sensibilité-du-prix-de-loption-delta-et-vega." class="level4" data-number="3.2.3.3">
<h4 data-number="3.2.3.3" class="anchored" data-anchor-id="sensibilité-du-prix-de-loption-delta-et-vega."><span class="header-section-number">3.2.3.3</span> Sensibilité du prix de l’option : Delta et Vega.</h4>
<ul>
<li>Le delta est la sensibilité du prix de l’option par rapport au sous-jacent qui est ici le taux d’intérêt. Il est donné par la formule suivante:</li>
</ul>
<p><span class="math display">\[\Delta =\frac{option_{h}-option}{h}\]</span></p>
<p>Où <span class="math inline">\(option_{h}\)</span> est le prix de l’option avec un taux d’intérêt augmenté de h.</p>
<p>Il peut aussi être utilisé pour se couvrir contre le risque de taux d’intérêt.</p>
<ul>
<li>Le Vega est la sensibilité du prix de l’option par rapport à la volatilité. Il est donné par la formule suivante:</li>
</ul>
<p><span class="math display">\[\text{Vega} =\frac{option_{\sigma+h}-option_{\sigma}}{h}\]</span></p>
<p>Où <span class="math inline">\(option_{\sigma+h}\)</span> est le prix de l’option avec une volatilité augmentée de h.</p>
<p>Une obligation avec un Vega null est moins sensible à la volatilité du taux d’intérêt.</p>
<p>Le code ci-dessous permet d’implémenter le calcul du delta et du vega.</p>
<p>Nous observons qu’une augmentation infinitésimale du taux d’intérêt et de la volatilité conduit à une diminution du prix de l’option de rappel.</p>
<div id="cell-65" class="cell" data-execution_count="266">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>sigma <span class="op">=</span> <span class="fl">0.01</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>h <span class="op">=</span><span class="fl">0.001</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>option_h <span class="op">=</span> calcule_option(c<span class="op">=</span>coupon,s<span class="op">=</span>spread,t<span class="op">=</span>temps_exercice,T<span class="op">=</span>maturite,</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>                        sigma<span class="op">=</span>sigma,data<span class="op">=</span>essai,N<span class="op">=</span>Nombre_simulations,</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>                        h_taux<span class="op">=</span>h,h_sigma<span class="op">=</span><span class="fl">0.01</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>option_0 <span class="op">=</span> calcule_option(c<span class="op">=</span>coupon,s<span class="op">=</span>spread,t<span class="op">=</span>temps_exercice,T<span class="op">=</span>maturite,</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>                        sigma<span class="op">=</span>sigma,data<span class="op">=</span>essai,N<span class="op">=</span>Nombre_simulations,</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>                        h_taux<span class="op">=</span><span class="dv">0</span>,h_sigma<span class="op">=</span><span class="fl">0.01</span>)</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>delta <span class="op">=</span> (option_h <span class="op">-</span> option_0) <span class="op">/</span>h</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Le delta de l'option est </span><span class="sc">{</span>delta<span class="sc">:.2f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Le delta de l'option est -3.16</code></pre>
</div>
</div>
<div id="cell-66" class="cell" data-execution_count="267">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcul des Vega</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>h <span class="op">=</span> <span class="fl">0.0001</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>option_haut <span class="op">=</span> calcule_option(c<span class="op">=</span>coupon,s<span class="op">=</span>spread,t<span class="op">=</span>temps_exercice,T<span class="op">=</span>maturite,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>                        sigma<span class="op">=</span>sigma,data<span class="op">=</span>essai,N<span class="op">=</span>Nombre_simulations,</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>                        h_taux<span class="op">=</span><span class="dv">0</span>,h_sigma<span class="op">=</span>h)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>option_bas <span class="op">=</span> calcule_option(c<span class="op">=</span>coupon,s<span class="op">=</span>spread,t<span class="op">=</span>temps_exercice,T<span class="op">=</span>maturite,</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>                        sigma<span class="op">=</span>sigma,data<span class="op">=</span>essai,N<span class="op">=</span>Nombre_simulations,</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>                        h_taux<span class="op">=</span><span class="dv">0</span>,h_sigma<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>                            </span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>                            </span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>vega <span class="op">=</span> (option_haut <span class="op">-</span> option_bas) <span class="op">/</span> h</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Le vega de l'option est </span><span class="sc">{</span>vega<span class="sc">:.2f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Le vega de l'option est -16.03</code></pre>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="conclusion" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Conclusion</h1>
<p>Dans ce document, l’accent a été mis sur la valorisation des obligations. Initialement, nous avons élaboré une courbe d’obligation zéro-coupon simplifiée, à partir de laquelle nous avons pu extrapoler la courbe des taux zéro-coupon. Nous avons procédé sous l’hypothèse d’une courbe de taux déterministe, ce qui a facilité l’examen des concepts de prix sale (Dirty Price) et de prix propre (Clean Price), chacun présentant ses propres avantages et inconvénients. Par exemple, le prix propre est souvent privilégié dans l’analyse des risques. Nous avons également exploré comment le prix des obligations varie en fonction des changements de taux et de spread, constatant que le prix d’une obligation tend à augmenter avec le taux d’intérêt et le spread. Nous avons observé une duration de 8%, indiquant qu’une hausse de 1% des taux d’intérêt entraînerait une baisse de 8% de la valeur de l’obligation. Nous avons également utilisé un modèle simplifié de Hull et White pour valoriser une option de caplet et une option avec clause de rappel.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>